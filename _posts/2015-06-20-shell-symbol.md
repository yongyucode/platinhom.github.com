---
layout: post
title: Bash符号用途的小结
date: 2015-06-20 06:14:16
categories: CompSci
tags: Bash Shell
---

### `$` 调用变量

- 调用变量,一般`$var`即可,和字符连接时最好用`${var}`

### `!` 非,历史操作

- `[ ! -z $a ]`判断表达式中的否逻辑
- `!(*.pdf)` 匹配内容外的其余内容,这里是非pdf文件
- `[!123]` 表示非指定字符外的任意单字符
- `!=` 字符串不等于.
- `!grep` 执行最近执行的开头匹配的命令
- `!n` n为数字,执行历史编号(`history`)第n的命令
- `!-n` 执行之前第几条命令,`!-1`等于`!!`
- `!!`执行上一条命令

### `&` 背景,and

- 加在命令最后,表示背景运行
- 在`[[ ]]`中`&&`表与and操作.
- 在命令后面的`&&`表示当前面命令返回正确时则执行后面的命令

### `{}` 变量名

- 变量名调用时定义变量名

### `[]` 判断运算,数组号,指定单匹配

- `[ ]` 判断表达式,`\<\>`需要转义
- `[[ ]]` 带有模式匹配的判断表达式,`<>`不需转移,支持`&& ||`逻辑操作,变量可不需要`$`.
- `array[n]` 调用数组元素 
- `[!123]和[a-h]`中表示任一匹配的单字符
- `$[3+7]`将运算结果返回

### `()`
- 优先运算
- `array=(1 2 3)`定义数组
- `((1+2))`数值计算,可以作为判断条件,非0时为真.
- `a=$(date)` 直接调用函数并运行,将结果像变量一样返回.类似于`` ` ` ``
- `a=$((3+7)`输出运算结果并返回

### `*`

- 任意数量字符的通配符
- `*`乘法和`**`乘方(expr中不支持乘方,乘法也要转义)
- 在`"$*"`表示将所有参数变量作为一个字符串返回

### `?`

- 单字符通配符
- `$?`上次指令的返回值.0为正常返回.

### `.` 

- `.`和`..`代表当前和上级目录

### `" "` 字符串

- 字符串,`$`会起效,用来表达`' '`

### `' '` 字符串

- 字符串,但`$`变量化失效,但转义起效.还用在可以用来表达`""`.

### `` ` ` `` 执行

- 执行里面的指令. 


### `|` 管道

- 管道,将上一命令的结果用作下一命令的输入
- 在`[[ ]]`中`||`表或操作.
- 在命令后面的`||`表示当前面命令返回否时则执行后面的命令

### `>` 重定向,大于

- 重定向输出
- 大于,在`[]`中要转义,`[[]]`中不需要

### `<` 重定向,小于

- 重定向输入
- 小于,在`[]`中要转义,`[[]]`中不需要

### `@` 表逐一

- `$@`表示所有参数变量,即使加了`""`依然逐个处理.
- `${@:3} `同上,指第三参数开始所有参数变量

### `#` 注释,左起匹配

- 注释
- `${#var}` 中表返回长度数量,`${#array[*]}` 数组元素数量
- `${字串#匹配字串}`左起匹配的最短字符串(支持`*`等)的删去,像`/home/hi/abc.txt`的`${var#*/}`是`home/hi/abc.txt`
- `${字串##匹配字串}` 左起匹配的最长字符串(支持`*`等)的删去,上例,`${var##*/}`是`abc.txt`
- `${变量1/#查找字符/替换字符}`左起匹配的替换,可以不输入`#`也行

### `%` 求余,右起匹配

- 求余运算`5%1`
- `${字串%匹配字串}` 右起匹配的最短字符串(支持*等)的删去,像`/home/hi/abc.txt`的`${var%.*}`是`/home/hi/abc`
- `${字串%匹配字串}` 右起匹配的最长字符串(支持*等)的删去,像`/home/hi.ok/abc.txt`的`${var%%.*}`是`/home/hi`
- `${变量1/%查找字符/替换字符}`右起匹配的替换

### `/` 表示分隔,除法,替换

- linux/mac下目录符
- 数学运算中的除法
- `${变量1/查找字符/替换字符}`或sed等正则式中表示分隔.
- `${变量1//查找字符/替换字符}` 将所有查找到的字符替换为替换字符串



### `\` 转义

- 转义符

### `~`

- 相对路径中表示用户目录

### `^`



### `;` 语句终结和分隔

- 同一行多个语句分隔符

### `,`

### `+`

- 数学运算的加法

### `-` 相减,参数选项,范围

- 数学运算的减法
- `-l --help` 命令选项
- 相对路径中表示上一次所在的目录
- `[a-h]`中表示范围.

### `=` 赋值或相等

- `a=1` 变量赋值

### `:` 主要表位置

- `${var:3}`表示第四个字符起的字符串(因为从0起),支持负数表达反向
- `${var:开始位置:结束位置}` 某个范围内字符串.不支持负数
- `${@:3}`中表示第三个起以后的项



## Reference

1. [Shell中比较判断,控制,循环和函数](http://platinhom.github.io/2015/06/14/shell-function-for-if/)
2. [Shell变量,数组,运算及操作](http://platinhom.github.io/2015/06/15/shell-varient-operation/)
3. [正则表达式](http://platinhom.github.io/2015/06/10/regexp-re/)


---
