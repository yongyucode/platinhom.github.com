---
layout: post
title: Shell变量,数组,运算及操作
date: 2015-06-14 20:14:10
categories: CompSci
tags: Shell Bash
---

## 变量
### 变量赋值
- 直接赋值: `var="abc"`
- 通过命令返回: `` var=`date` ``或`var=$(date)`
- 通过交互读入: `read var`
- 取消变量赋值: `var=`
- 取消变量: `unset var`

### 环境变量(一般推荐用大写)
- `export var="abc"`或`export var`
- 取消环境变量:`unset var`

### 变量调用
一般地,采用`$var`即可.在字符串中或其余语句中,为了避免误解,更常用`${var}`方法调用,`{}`是最规范方法.  
另外,变量可以在大括号内加入修饰词来对变量进行进一步操作.如下:  

~~~ bash
${#var}    #返回变量字符串的长度
${变量1/查找字符/替换字符} #将从左起找到的字符替换为替换字符串(字符串不用"")
${变量1/#查找字符/替换字符} #将左边第一个字符起的查找字符替换为替换字符串
${变量1/%查找字符/替换字符} #右边第一个字符起的查找字符替换为替换字符串
${变量1//查找字符/替换字符} #将所有查找到的字符替换为替换字符串
${变量1:位置} #返回从位置起到结尾的字符串,注意位置是从0数起的,(-3)是倒数第三个
${变量1:开始位置:结束位置} #某个范围内.不能为负数.
${字串#匹配字串};${字串%匹配字串} #最左/最右起匹配的最短字符串(支持*等)的删去
${字串##匹配字串};${字串%%匹配字串} #最左/最右起匹配的最长字符串(支持*等)的删去
~~~
#### 例子:

~~~ bash
${1%.*}   #变量文件名（不包含.txt)
${1%/*}   #变量文件所在目录
${1##*.}  #变量文件的后缀名
${@:3}    #第三个及以后的所有输入参数
~~~

## 数组
### 赋值和取消赋值
- 直接赋值: `y=(a b c)`
- 字符串转化: `x="a  b	c d";y=(x)`
- 对指定元素赋值: `y[n]="a"`(元素序号见下说明).

### 调用
- 调用元素: `${y[n]}`.注意,bash,ksh使用0开始;zsh.tcsh使用1开始,还直接支持`$y[n]`的用法.
- 调用所有元素:`${y[*]}`或`${y[@]}`.bash`$y`只会返回第一个元素.在zsh,tcsh支持`$y`返回所有元素.
- 返回数组元素数目:`${#y[*]}`,zsh/tcsh支持`${#y}`

## 运算


---
